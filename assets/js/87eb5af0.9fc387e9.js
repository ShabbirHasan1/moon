"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[54925],{24309:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var t=n(24246),s=n(71670);const i={slug:"proto-v0.47",title:"proto v0.47 - New backend system & asdf support",authors:["milesj"],tags:["backend","plugin","asdf"]},r=void 0,l={permalink:"/blog/proto-v0.47",editUrl:"https://github.com/moonrepo/moon/tree/master/website/blog/2025-02-25_proto-v0.47.mdx",source:"@site/blog/2025-02-25_proto-v0.47.mdx",title:"proto v0.47 - New backend system & asdf support",description:"In this release, we're stoked to release backends, a new type of plugin that enables the use of",date:"2025-02-25T00:00:00.000Z",tags:[{inline:!0,label:"backend",permalink:"/blog/tags/backend"},{inline:!0,label:"plugin",permalink:"/blog/tags/plugin"},{inline:!0,label:"asdf",permalink:"/blog/tags/asdf"}],readingTime:2.61,hasTruncateMarker:!0,authors:[{name:"Miles Johnson",title:"Founder, developer",url:"https://github.com/milesj",imageURL:"/img/authors/miles.jpg",key:"milesj"}],frontMatter:{slug:"proto-v0.47",title:"proto v0.47 - New backend system & asdf support",authors:["milesj"],tags:["backend","plugin","asdf"]},unlisted:!1,nextItem:{title:"moon v1.32 - Remote cache and built-in toolchain improvements",permalink:"/blog/moon-v1.32"}},a={authorsImageUrls:[void 0]},d=[{value:"New backend: <code>asdf</code>",id:"new-backend-asdf",level:2},{value:"New built-in tool: <code>poetry</code>",id:"new-built-in-tool-poetry",level:2},{value:"proto now shims itself",id:"proto-now-shims-itself",level:2},{value:"Other changes",id:"other-changes",level:2}];function c(e){const o={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"In this release, we're stoked to release backends, a new type of plugin that enables the use of\n3rd-party plugins."}),"\n",(0,t.jsxs)(o.h2,{id:"new-backend-asdf",children:["New backend: ",(0,t.jsx)(o.code,{children:"asdf"})]}),"\n",(0,t.jsx)(o.p,{children:'Since proto\'s inception, we\'ve been asked the question "how\'s this different than asdf?", or "why\nnot just use asdf?". The answer to both of these questions is still the same 3 things:'}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"To start, asdf isn't multi-platform, it's Unix only and doesn't support Windows (proto does)."}),"\n",(0,t.jsx)(o.li,{children:"Secondly, asdf is powered by Bash scripts, which means a bash-compatible interpreter or shell is\nrequired (proto uses WASM)."}),"\n",(0,t.jsx)(o.li,{children:"And lastly, proto is built on Rust, so it's extremely fast and reliable."}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:["With all that said, asdf has a massive ",(0,t.jsx)(o.a,{href:"https://github.com/asdf-vm/asdf-plugins",children:"plugin registry"}),"\ncompared to proto's, and it would take a really long time for proto to reach parity. Because of\nthis, we've been working on a new plugin type called a \"",(0,t.jsx)(o.a,{href:"/docs/proto/tool-spec#backends",children:"backend"}),'",\nwhich allows 3rd-party plugins to be utilized within proto for downloading and installing tools,\nlocating executables, and more.']}),"\n",(0,t.jsxs)(o.p,{children:["Of course, our first backend is ",(0,t.jsx)(o.a,{href:"https://asdf-vm.com/",children:"asdf"}),". To install a tool from asdf's\nregistry, prefix the version in ",(0,t.jsx)(o.code,{children:".prototools"})," with ",(0,t.jsx)(o.a,{href:"/docs/proto/tool-spec#backends",children:(0,t.jsx)(o.code,{children:"asdf:"})}),", or\nconfigure the ",(0,t.jsx)(o.a,{href:"/docs/proto/config#backend",children:(0,t.jsx)(o.code,{children:"backend"})})," setting."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-toml",metastring:'title=".prototools"',children:'# For this single version\nzig = "asdf:0.13.0"\n\n# For all versions\nzig = "0.13.0"\n\n[tools.zig]\nbackend = "asdf"\n'})}),"\n",(0,t.jsxs)(o.p,{children:["This backend implementation ",(0,t.jsx)(o.em,{children:"does not"})," use the ",(0,t.jsx)(o.code,{children:"asdf"})," binary itself, and instead emulates the\nenvironment as best we can. Because of this, some tools may not be usable through proto, especially\nthose that rely on the ",(0,t.jsx)(o.code,{children:"exec-env"})," script. Furthermore, the 2 bullet points above are unfortunately\nstill restrictions: This is Unix only and requires Bash."]}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"In the next release, we'll investigate the use of Scoop or Chocolatey as a potential backend for\nWindows users. If you're interested in this endeavor, send us a message in Discord!"}),"\n"]}),"\n",(0,t.jsxs)(o.h2,{id:"new-built-in-tool-poetry",children:["New built-in tool: ",(0,t.jsx)(o.code,{children:"poetry"})]}),"\n",(0,t.jsxs)(o.p,{children:["In ",(0,t.jsx)(o.a,{href:"./proto-v0.45",children:"v0.45"})," we introduced 3 new tools, and in this release, we're releasing 1 more! We\nwant to expand our Python support, and since we already support pip and uv, we wanted to also\nsupport Poetry, which has been requested by the community many times now. Poetry installation works\nquite differently than other tools, so please report any issues or improvements."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-shell",children:"$ proto install poetry\n"})}),"\n",(0,t.jsx)(o.h2,{id:"proto-now-shims-itself",children:"proto now shims itself"}),"\n",(0,t.jsxs)(o.p,{children:["Until now, proto was a stand-alone binary that existed on ",(0,t.jsx)(o.code,{children:"PATH"})," and was not coupled to proto's\nstore (",(0,t.jsx)(o.code,{children:"~/.proto"}),") outside of possibly existing in ",(0,t.jsx)(o.code,{children:"~/.proto/bin"})," for convenience. Over the past\ncouple of releases, we've been working on supporting proto as an\n",(0,t.jsx)(o.a,{href:"https://github.com/moonrepo/plugins/tree/master/tools/proto",children:"official tool"})," within proto, so\ncommands like ",(0,t.jsx)(o.code,{children:"proto install proto"})," and ",(0,t.jsx)(o.code,{children:"proto pin proto 0.45"})," actually function correctly."]}),"\n",(0,t.jsxs)(o.p,{children:["Starting in this release, when proto is installed via proto, either through ",(0,t.jsx)(o.code,{children:"proto install"})," or\n",(0,t.jsx)(o.code,{children:"proto upgrade"}),", a shim will be created at ",(0,t.jsx)(o.code,{children:"~/.proto/shims/proto"}),", allowing for runtime version\ndetection and pinning. This basically means you can now pin a project to a certain version of proto\nlike any other tool, for example:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-toml",metastring:'title=".prototools"',children:'proto = "0.46"\n'})}),"\n",(0,t.jsx)(o.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,t.jsxs)(o.p,{children:["View the ",(0,t.jsx)(o.a,{href:"https://github.com/moonrepo/proto/releases/tag/v0.47.0",children:"official release"})," for a full list\nof changes."]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Updated offline connection checks to also ping IPv6 addresses for Google & CloudFlare DNS."}),"\n"]})]})}function h(e={}){const{wrapper:o}={...(0,s.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},71670:(e,o,n)=>{n.d(o,{Z:()=>l,a:()=>r});var t=n(27378);const s={},i=t.createContext(s);function r(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);