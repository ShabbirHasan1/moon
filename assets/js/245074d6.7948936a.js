"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[61361],{24859:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var r=o(24246),i=o(71670),s=o(79022);const t={title:"Workflows",toc_max_heading_level:6},l=void 0,d={id:"proto/workflows",title:"Workflows",description:"With proto, we provide multiple workflows for everyday use for you to choose from. They can be used",source:"@site/docs/proto/workflows.mdx",sourceDirName:"proto",slug:"/proto/workflows",permalink:"/docs/proto/workflows",draft:!1,unlisted:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/proto/workflows.mdx",tags:[],version:"current",frontMatter:{title:"Workflows",toc_max_heading_level:6},sidebar:"proto",previous:{title:"Install proto",permalink:"/docs/proto/install"},next:{title:"Configuration",permalink:"/docs/proto/config"}},a={},c=[{value:"Shims",id:"shims",level:2},{value:"Binary linking",id:"binary-linking",level:2},{value:"Shell activation<VersionLabel></VersionLabel>",id:"shell-activation",level:2},{value:"Comparison",id:"comparison",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"With proto, we provide multiple workflows for everyday use for you to choose from. They can be used\nindividually, or together, it's up to you!"}),"\n",(0,r.jsx)(n.h2,{id:"shims",children:"Shims"}),"\n",(0,r.jsxs)(n.p,{children:["proto is primarily powered the by industry standard concept of shims. For each tool installed in\nproto, a shim file will exist at ",(0,r.jsx)(n.code,{children:"~/.proto/shims"})," for the primary executable, and some secondary\nexecutables. Shims ",(0,r.jsx)(n.em,{children:"are not"})," symlinks to the tool's binary, but are thin wrappers around\n",(0,r.jsx)(n.a,{href:"./commands/run",children:(0,r.jsx)(n.code,{children:"proto run"})}),", enabling ",(0,r.jsx)(n.a,{href:"./detection",children:"runtime version detection"})," on every\ninvocation! For example, these are equivalent:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ proto run node -- --version\n20.0.0\n\n$ node --version\n20.0.0\n\n$ which node\n~/.proto/shims/node\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To make use of shims, prepend the ",(0,r.jsx)(n.code,{children:"~/.proto/shims"})," directory to ",(0,r.jsx)(n.code,{children:"PATH"})," in your shell profile. This\n",(0,r.jsx)(n.em,{children:"must come before"})," the ",(0,r.jsx)(n.a,{href:"#binary-linking",children:"bin directory"})," if using both."]}),"\n",(0,r.jsx)(n.h2,{id:"binary-linking",children:"Binary linking"}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, we also support a non-shim based approach, which creates symlinks to a versioned\ntool's primary and secondary executables. For each tool installed in proto, a symlink will exist at\n",(0,r.jsx)(n.code,{children:"~/.proto/bin"})," for the globally pinned version (configured in ",(0,r.jsx)(n.a,{href:"./config",children:(0,r.jsx)(n.code,{children:"~/.proto/.prototools"})}),")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ node --version\n20.0.0\n\n$ which node\n~/.proto/bin/node -> /.proto/tools/node/20.0.0/bin/node\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The version of a tool that's symlinked ",(0,r.jsx)(n.em,{children:"is not"})," dynamic and is manually linked by pinning the chosen\nversion with ",(0,r.jsx)(n.a,{href:"./commands/install",children:(0,r.jsx)(n.code,{children:"proto install --pin=global"})})," or\n",(0,r.jsx)(n.a,{href:"./commands/pin",children:(0,r.jsx)(n.code,{children:"proto pin --global"})}),". This also happens automatically the first time a tool is\ninstalled."]}),"\n",(0,r.jsxs)(n.p,{children:["To make use of bins, prepend the ",(0,r.jsx)(n.code,{children:"~/.proto/bin"})," directory to ",(0,r.jsx)(n.code,{children:"PATH"})," in your shell profile. This\n",(0,r.jsx)(n.em,{children:"must come after"})," the ",(0,r.jsx)(n.a,{href:"#shims",children:"shim directory"})," if using both."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Not all tools support symlinking a binary, as not all files are executable. For example, most\nNode.js package managers currently do not support this, as JavaScript files are not executable\n(especially on Windows). Shims are required for these tools."})}),"\n",(0,r.jsxs)(n.h2,{id:"shell-activation",children:["Shell activation",(0,r.jsx)(s.Z,{version:"0.38.0"})]}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["This feature is extremely experimental and may change based on feedback! If you run into any issues,\nplease report an issue on ",(0,r.jsx)(n.a,{href:"https://github.com/moonrepo/proto",children:"GitHub"})," or\n",(0,r.jsx)(n.a,{href:"https://discord.gg/qCh9MEynv2",children:"Discord"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"Our last workflow is what we call shell activation (or shell hooks), and its where the proto\nenvironment is setup/reset every time you change directories. If you're coming from another version\nmanager, you may be familiar with this kind of workflow."}),"\n",(0,r.jsxs)(n.p,{children:["So how does this work exactly? In your shell profile, you'll evaluate a call to\n",(0,r.jsx)(n.a,{href:"./commands/activate",children:(0,r.jsx)(n.code,{children:"proto activate <shell>"})}),', which generates a bunch of shell specific syntax\nthat registers a hook for "run this code when the current directory or prompt line changes". Once\nthis hook is registered and you run ',(0,r.jsx)(n.code,{children:"cd"})," (for example), proto will load all tools and..."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Export environment variables based on ",(0,r.jsx)(n.a,{href:"./config#env",children:(0,r.jsx)(n.code,{children:"[env]"})})," and\n",(0,r.jsx)(n.a,{href:"./config#toolsenv",children:(0,r.jsx)(n.code,{children:"[tools.*.env]"})})]}),"\n",(0,r.jsxs)(n.li,{children:["Prepend ",(0,r.jsx)(n.code,{children:"PATH"})," with tool-specific directories (like local and global executables) for the detected\nversion"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ cd /some/path && node --version\n20.0.0\n\n$ cd /another/path && node --version\n18.0.0\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["View the ",(0,r.jsx)(n.a,{href:"./commands/activate",children:(0,r.jsx)(n.code,{children:"proto activate"})})," documentation for information on how to setup your\nshell profile for this workflow."]})}),"\n",(0,r.jsx)(n.h2,{id:"comparison",children:"Comparison"}),"\n",(0,r.jsx)(n.p,{children:"The workflows above may come across as information overload, so we've provided the following\ncomparison table outlining the features each workflow supports."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Shims"}),(0,r.jsx)(n.th,{children:"Bins"}),(0,r.jsx)(n.th,{children:"Activate"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Runtime version detection"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe0 only when the hook triggers"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Supports multiple versions"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Fixed to a single version"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe0 with arg or env var"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe0 if not using shims"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Includes all tool executables"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Includes tool globals/packages"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Exports environment variables"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Prepends ",(0,r.jsx)(n.code,{children:"PATH"})]}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34"}),(0,r.jsx)(n.td,{children:"\ud83d\udfe2"})]})]})]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},79022:(e,n,o)=>{o.d(n,{Z:()=>s});var r=o(9619),i=o(24246);function s(e){let{header:n,inline:o,updated:s,version:t}=e;return(0,i.jsx)(r.Z,{text:`v${t}`,variant:s?"success":"info",className:n?"absolute right-0 top-1.5":o?"inline-block":"ml-2"})}},9619:(e,n,o)=>{o.d(n,{Z:()=>l});var r=o(40624),i=o(31792),s=o(24246);const t={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function l(e){let{className:n,icon:o,text:l,variant:d}=e;return(0,s.jsxs)("span",{className:(0,r.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",d?t[d]:"bg-gray-100 text-gray-800",n),children:[o&&(0,s.jsx)(i.Z,{icon:o,className:"mr-1"}),l]})}},71670:(e,n,o)=>{o.d(n,{Z:()=>l,a:()=>t});var r=o(27378);const i={},s=r.createContext(i);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);