"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[10298],{8851:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>h});var s=i(24246),r=i(71670),o=i(27915),l=i(79022);const t={title:"Version specification"},d=void 0,a={id:"proto/version-spec",title:"Version specification",description:"Since proto is a toolchain for multiple tools, each with differing version formats, we must align",source:"@site/docs/proto/version-spec.mdx",sourceDirName:"proto",slug:"/proto/version-spec",permalink:"/docs/proto/version-spec",draft:!1,unlisted:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/proto/version-spec.mdx",tags:[],version:"current",frontMatter:{title:"Version specification"},sidebar:"proto",previous:{title:"Install proto",permalink:"/docs/proto/install"},next:{title:"Version detection",permalink:"/docs/proto/detection"}},c={},h=[{value:"Semantic versions",id:"semantic-versions",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Guidelines",id:"guidelines",level:3},{value:"Calendar versions<VersionLabel></VersionLabel>",id:"calendar-versions",level:2},{value:"Syntax",id:"syntax-1",level:3},{value:"Guidelines",id:"guidelines-1",level:3},{value:"Requirements and ranges",id:"requirements-and-ranges",level:2},{value:"Syntax",id:"syntax-2",level:3},{value:"Guidelines",id:"guidelines-2",level:3}];function x(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{text:"3 min"}),"\n",(0,s.jsx)(n.p,{children:"Since proto is a toolchain for multiple tools, each with differing version formats, we must align\nthem on a standard specification that can resolve and store safely. To handle this, we've\nimplemented our own solution called the version specification. This specification currently supports\nsemantic and calendar based versions, each with their own guidelines and caveats."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"If you're implementing a plugin for a specific tool that has a different version format, you'll need\nto re-format it into one of the specifications below."})}),"\n",(0,s.jsx)(n.h2,{id:"semantic-versions",children:"Semantic versions"}),"\n",(0,s.jsxs)(n.p,{children:["The most common format is ",(0,s.jsx)(n.a,{href:"https://semver.org/",children:"semver"}),", also known as a semantic version. This\nformat requires major, minor, and patch numbers, with optional pre-release and build metadata. The\nfollowing formats are allowed:"]}),"\n",(0,s.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<major>.<minor>.<patch>"})," - 1.2.3"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<major>.<minor>.<patch>-<pre>"})," - 1.2.3-alpha.0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<major>.<minor>.<patch>-<pre>+<build>"})," - 1.2.3-alpha.0+nightly456"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<major>.<minor>.<patch>+<build>"})," - 1.2.3+nightly456"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"guidelines",children:"Guidelines"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["major, minor, patch - ",(0,s.jsx)(n.code,{children:"0-9"})," of any length"]}),"\n",(0,s.jsxs)(n.li,{children:["pre, build - ",(0,s.jsx)(n.code,{children:"a-z"}),", ",(0,s.jsx)(n.code,{children:"0-9"}),", ",(0,s.jsx)(n.code,{children:"-"}),", ",(0,s.jsx)(n.code,{children:"."})]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions",children:"Learn more about this format!"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"calendar-versions",children:["Calendar versions",(0,s.jsx)(l.Z,{version:"0.37.0"})]}),"\n",(0,s.jsxs)(n.p,{children:["Another popular format is ",(0,s.jsx)(n.a,{href:"https://calver.org/",children:"calver"}),", also known as a calendar version, which\nuses the calendar year, month, and day as version numbers. This format also supports pre-release and\nbuild metadata, but with different syntax than semver. The following formats are allowed:"]}),"\n",(0,s.jsx)(n.h3,{id:"syntax-1",children:"Syntax"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>"})," - 2024-02"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>"})," - 2024-02-26"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>.<build>"})," - 2024-02-26.123"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>_<build>"})," - 2024-02-26_123"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>.<build>-<pre>"})," - 2024-02-26.123-alpha.0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>_<build>-<pre>"})," - 2024-02-26_123-alpha.0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<year>-<month>-<day>-<pre>"})," - 2024-02-26-alpha.0"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"guidelines-1",children:"Guidelines"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["year - ",(0,s.jsx)(n.code,{children:"0-9"})," of 1-4 length","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If the year is not YYYY format, it will use the year 2000 as the base. For example, ",(0,s.jsx)(n.code,{children:"24"})," becomes\n",(0,s.jsx)(n.code,{children:"2024"}),", and ",(0,s.jsx)(n.code,{children:"124"})," becomes ",(0,s.jsx)(n.code,{children:"2124"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["month - ",(0,s.jsx)(n.code,{children:"0-9"})," of 1-2 length","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Supports with and without a leading zero (",(0,s.jsx)(n.code,{children:"02"})," vs ",(0,s.jsx)(n.code,{children:"2"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Does not support invalid months (",(0,s.jsx)(n.code,{children:"0"})," or ",(0,s.jsx)(n.code,{children:"13"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["day - ",(0,s.jsx)(n.code,{children:"0-9"})," of 1-2 length","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Can be omitted, even with build/pre."}),"\n",(0,s.jsxs)(n.li,{children:["Supports with and without a leading zero (",(0,s.jsx)(n.code,{children:"02"})," vs ",(0,s.jsx)(n.code,{children:"2"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Does not support invalid days (",(0,s.jsx)(n.code,{children:"0"})," or ",(0,s.jsx)(n.code,{children:"32"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["build - ",(0,s.jsx)(n.code,{children:"0-9"})," of any length","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Also known as a "micro" number.'}),"\n",(0,s.jsxs)(n.li,{children:["The leading dot ",(0,s.jsx)(n.code,{children:"."})," format is preferred."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["pre - ",(0,s.jsx)(n.code,{children:"a-z"}),", ",(0,s.jsx)(n.code,{children:"0-9"}),", ",(0,s.jsx)(n.code,{children:"-"}),", ",(0,s.jsx)(n.code,{children:"."})]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://calver.org/#scheme",children:"Learn more about this format!"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"requirements-and-ranges",children:"Requirements and ranges"}),"\n",(0,s.jsx)(n.p,{children:"Besides an explicit version, we also support partial versions known as version requirements or\nversion ranges. These are quite complex as we need to support both semver and calver in unison, as\nwell as support partial/incomplete numbers (missing patch/day, missing minor/month, etc). We do our\nbest to support as many combinations as possible, but we suggest aligning with the following\nformats:"}),"\n",(0,s.jsx)(n.h3,{id:"syntax-2",children:"Syntax"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Requirement - ",(0,s.jsx)(n.code,{children:"[<op>]<pattern>"})," - ",(0,s.jsx)(n.code,{children:"1.2.3"}),", ",(0,s.jsx)(n.code,{children:">4.5"}),", ",(0,s.jsx)(n.code,{children:"~3"}),", ",(0,s.jsx)(n.code,{children:"^2000-10"}),", etc"]}),"\n",(0,s.jsxs)(n.li,{children:["AND range - ",(0,s.jsx)(n.code,{children:"<requirement>[,] <requirement> ..."})," - ",(0,s.jsx)(n.code,{children:">=1, <2"}),", ",(0,s.jsx)(n.code,{children:"^1.3 <=1.3.9"}),", etc"]}),"\n",(0,s.jsxs)(n.li,{children:["OR range - ",(0,s.jsx)(n.code,{children:"<requirement> || <requirement> ..."})," - ",(0,s.jsx)(n.code,{children:"^1.2 || ^2.3"}),", ",(0,s.jsx)(n.code,{children:"~2000-10 || ~2010-2"}),", etc"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"guidelines-2",children:"Guidelines"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["op - ",(0,s.jsx)(n.code,{children:"="}),", ",(0,s.jsx)(n.code,{children:">"}),", ",(0,s.jsx)(n.code,{children:">="}),", ",(0,s.jsx)(n.code,{children:"<="}),", ",(0,s.jsx)(n.code,{children:"<"}),", ",(0,s.jsx)(n.code,{children:"~"}),", ",(0,s.jsx)(n.code,{children:"^"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If omitted, defaults to ",(0,s.jsx)(n.code,{children:"~"})," when not in a range."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["pattern","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dot-separated semver, with optional major and patch numbers."}),"\n",(0,s.jsx)(n.li,{children:"Dash-separated calver, with optional month and day numbers."}),"\n",(0,s.jsx)(n.li,{children:"Pre-release and build metadata are only supported when suffixed to full versions."}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},27915:(e,n,i)=>{i.d(n,{Z:()=>l});var s=i(83469),r=i(9619),o=i(24246);function l(e){let{text:n}=e;return(0,o.jsx)(r.Z,{text:n,icon:s.SZw,variant:"success",className:"absolute right-0 top-1.5"})}},79022:(e,n,i)=>{i.d(n,{Z:()=>o});var s=i(9619),r=i(24246);function o(e){let{header:n,inline:i,updated:o,version:l}=e;return(0,r.jsx)(s.Z,{text:`v${l}`,variant:o?"success":"info",className:n?"absolute right-0 top-1.5":i?"inline-block":"ml-2"})}},9619:(e,n,i)=>{i.d(n,{Z:()=>t});var s=i(40624),r=i(31792),o=i(24246);const l={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function t(e){let{className:n,icon:i,text:t,variant:d}=e;return(0,o.jsxs)("span",{className:(0,s.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",d?l[d]:"bg-gray-100 text-gray-800",n),children:[i&&(0,o.jsx)(r.Z,{icon:i,className:"mr-1"}),t]})}},71670:(e,n,i)=>{i.d(n,{Z:()=>t,a:()=>l});var s=i(27378);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);