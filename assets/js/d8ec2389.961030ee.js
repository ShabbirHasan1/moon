"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4684],{39291:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var t=o(24246),i=o(71670),s=o(88109);const l={slug:"proto-v0.45",title:"proto v0.45 - New built-in tools and build from source",authors:["milesj"],tags:["tool","build","source"],image:"./img/proto/v0.45.png"},r=void 0,a={permalink:"/blog/proto-v0.45",editUrl:"https://github.com/moonrepo/moon/tree/master/website/blog/2025-01-22_proto-v0.45.mdx",source:"@site/blog/2025-01-22_proto-v0.45.mdx",title:"proto v0.45 - New built-in tools and build from source",description:"In this release, we're very excited to introduce building tools from source, a feature that's been",date:"2025-01-22T00:00:00.000Z",tags:[{inline:!0,label:"tool",permalink:"/blog/tags/tool"},{inline:!0,label:"build",permalink:"/blog/tags/build"},{inline:!0,label:"source",permalink:"/blog/tags/source"}],readingTime:2.675,hasTruncateMarker:!0,authors:[{name:"Miles Johnson",title:"Founder, developer",url:"https://github.com/milesj",imageURL:"/img/authors/miles.jpg",key:"milesj"}],frontMatter:{slug:"proto-v0.45",title:"proto v0.45 - New built-in tools and build from source",authors:["milesj"],tags:["tool","build","source"],image:"./img/proto/v0.45.png"},unlisted:!1,prevItem:{title:"moon v1.32 - Remote cache and built-in toolchain improvements",permalink:"/blog/moon-v1.32"},nextItem:{title:"moon v1.31 - Toolchain progress, glob-based targets, task & remote cache improvements",permalink:"/blog/moon-v1.31"}},d={image:o(99380).Z,authorsImageUrls:[void 0]},c=[{value:"New built-in tools",id:"new-built-in-tools",level:2},{value:"<code>moon</code>",id:"moon",level:3},{value:"<code>uv</code>",id:"uv",level:3},{value:"<code>ruby</code>",id:"ruby",level:3},{value:"Build from source (unstable)",id:"build-from-source-unstable",level:2},{value:"Other changes",id:"other-changes",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"In this release, we're very excited to introduce building tools from source, a feature that's been\nin development for over a year."}),"\n",(0,t.jsx)(n.h2,{id:"new-built-in-tools",children:"New built-in tools"}),"\n",(0,t.jsx)(n.p,{children:"It's been quite some time since we've introduced a new official built-in tool, so in this release,\nwe have 3!"}),"\n",(0,t.jsx)(n.h3,{id:"moon",children:(0,t.jsx)(n.code,{children:"moon"})}),"\n",(0,t.jsx)(n.p,{children:"This was a no-brainer, and honestly, we probably should have done it much sooner. We were quite\nsurprised to see that moon is the 3rd most installed tool in proto, right behind pnpm and node\nrespectively. We felt that it was now time to make it official."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install moon\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If you were using the moon TOML plugin before (below), you can now remove this entry from your\n",(0,t.jsx)(n.code,{children:".prototools"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title=".prototools"',children:'[plugins]\nmoon = "https://raw.githubusercontent.com/moonrepo/moon/master/proto-plugin.toml"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"uv",children:(0,t.jsx)(n.code,{children:"uv"})}),"\n",(0,t.jsxs)(n.p,{children:["Additionally, Python interest has grown over recent months, especially with the introduction of\n",(0,t.jsx)(n.a,{href:"./moon-v1.30",children:"Python support in moon"}),", so we felt it was time to support the new hotness,\n",(0,t.jsx)(n.a,{href:"https://docs.astral.sh/uv/",children:"uv"}),"! We plan to bring uv integration into moon in the near future."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install uv\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"Although uv can also manage Python installations, we suggest using proto to keep everything\nstreamlined and isolated."})}),"\n",(0,t.jsx)(n.h3,{id:"ruby",children:(0,t.jsx)(n.code,{children:"ruby"})}),"\n",(0,t.jsxs)(n.p,{children:["And lastly, we now support ",(0,t.jsx)(n.a,{href:"https://www.ruby-lang.org/en/",children:"Ruby"}),", a popular general purpose\nprogramming language. Ruby was extremely difficult to support, primarily because Ruby does ",(0,t.jsx)(n.em,{children:"not"}),"\nsupport the concept of pre-builts, and ",(0,t.jsx)(n.em,{children:"must"})," be compiled from source files."]}),"\n",(0,t.jsx)(n.p,{children:"But thanks to our new build from source install strategy (below), Ruby support is now possible."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install ruby\n"})}),"\n",(0,t.jsx)(n.h2,{id:"build-from-source-unstable",children:"Build from source (unstable)"}),"\n",(0,t.jsx)(n.p,{children:"Up until now, tools could only be installed if they supported pre-built binaries, which was\ntypically more than enough. However, there are many languages that do not support pre-builts and\nmust be built from source, such as Ruby, PHP, and up until recently, Python. Building binaries from\nsource code is actually quite complicated, as the instructions for doing so is different across\noperating systems, architectures, and even system package managers."}),"\n",(0,t.jsx)(n.p,{children:"Regardless, we've spent the past year slowly working on a solution and have finally managed to\nimplement something usable, all through a powerful WASM API. And with that, the following tools now\nsupport build from source."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"deno"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"go"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"moon"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"node"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"python"})," (via ",(0,t.jsx)(n.code,{children:"python-build"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ruby"})," (via ",(0,t.jsx)(n.code,{children:"ruby-build"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["To actually build from source instead of downloading a prebuilt, simply pass ",(0,t.jsx)(n.code,{children:"--build"})," to\n",(0,t.jsx)(n.a,{href:"/docs/proto/commands/install",children:(0,t.jsx)(n.code,{children:"proto install"})}),". For tools that only support build (like Ruby), the\n",(0,t.jsx)(n.code,{children:"--build"})," flag is optional."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install python --build\n"})}),"\n",(0,t.jsx)(n.p,{children:"To demonstrate how this works, here's Go being built from source. We start by grouping operations\ninto steps, with the first step being the installation of system dependencies (via Homebrew or\nsomething similar). We then check that certain requirements are met, or abort if unmet. Up next, we\nneed to acquire the source code, either by downloading an archive, or cloning a Git repository. And\nlastly, running through and executing the build instructions/commands."}),"\n",(0,t.jsx)(s.Z,{src:o(47927),width:"90%"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"While this feature is very exciting, it is extremely unstable, so please report any issues, and\nprovide any and all feedback!"})}),"\n",(0,t.jsx)(n.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,t.jsxs)(n.p,{children:["View the ",(0,t.jsx)(n.a,{href:"https://github.com/moonrepo/proto/releases/tag/v0.45.0",children:"official release"})," for a full list\nof changes."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},88109:(e,n,o)=>{o.d(n,{Z:()=>i});var t=o(24246);function i(e){let{src:n,width:o="90%",alt:i="",title:s,align:l="center",padding:r="1rem"}=e;return(0,t.jsx)("div",{style:{marginBottom:r,marginTop:r,textAlign:l},children:(0,t.jsx)("img",{src:n.default,width:o,alt:i,title:s,className:"inline-block"})})}},99380:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/v0.45-d92a765b8c68b8ba14bce7eb76e9d6b0.png"},47927:(e,n,o)=>{o.r(n),o.d(n,{default:()=>t});const t=o.p+"assets/images/go-build-de7f9a0ccd072826c49d285e780f1a9d.png"},71670:(e,n,o)=>{o.d(n,{Z:()=>r,a:()=>l});var t=o(27378);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);